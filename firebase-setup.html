<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase 설정 - 주간보호센터 업무수행도우미</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#137fec",
                        "primary-dark": "#106cc9",
                    },
                    fontFamily: {
                        sans: ["Noto Sans KR", "Inter", "sans-serif"],
                    },
                },
            },
        };
    </script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-2xl">
        <div class="bg-white rounded-2xl shadow-2xl p-8">
            <!-- 헤더 -->
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-primary rounded-full mb-4">
                    <span class="material-symbols-outlined text-white text-4xl">settings</span>
                </div>
                <h1 class="text-2xl font-bold text-gray-900 mb-2">
                    Firebase 초기 설정
                </h1>
                <p class="text-gray-600 text-sm">
                    Firebase Console에서 받은 설정 정보를 입력하세요
                </p>
            </div>

            <!-- 안내 메시지 -->
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                <div class="flex gap-3">
                    <span class="material-symbols-outlined text-blue-600 text-xl">info</span>
                    <div class="flex-1 text-sm">
                        <p class="text-blue-900 font-semibold mb-2">설정 방법:</p>
                        <ol class="text-blue-800 space-y-1 list-decimal list-inside">
                            <li><a href="https://console.firebase.google.com/" target="_blank" class="underline hover:text-blue-600">Firebase Console</a>에서 프로젝트 생성</li>
                            <li>프로젝트 설정 → 일반 → "내 앱" → 웹 앱 추가</li>
                            <li>Firebase SDK 구성 정보를 아래 양식에 입력</li>
                            <li>"설정 저장" 버튼 클릭</li>
                        </ol>
                    </div>
                </div>
            </div>

            <!-- Firebase 설정 폼 -->
            <form id="firebase-setup-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        API Key *
                    </label>
                    <input type="text" id="apiKey" required
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 bg-white text-gray-900 focus:ring-2 focus:ring-primary focus:border-transparent font-mono text-sm"
                        placeholder="AIza...">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Auth Domain *
                    </label>
                    <input type="text" id="authDomain" required
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 bg-white text-gray-900 focus:ring-2 focus:ring-primary focus:border-transparent font-mono text-sm"
                        placeholder="your-project.firebaseapp.com">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Project ID *
                    </label>
                    <input type="text" id="projectId" required
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 bg-white text-gray-900 focus:ring-2 focus:ring-primary focus:border-transparent font-mono text-sm"
                        placeholder="your-project">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Storage Bucket *
                    </label>
                    <input type="text" id="storageBucket" required
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 bg-white text-gray-900 focus:ring-2 focus:ring-primary focus:border-transparent font-mono text-sm"
                        placeholder="your-project.appspot.com">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Messaging Sender ID *
                    </label>
                    <input type="text" id="messagingSenderId" required
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 bg-white text-gray-900 focus:ring-2 focus:ring-primary focus:border-transparent font-mono text-sm"
                        placeholder="123456789">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        App ID *
                    </label>
                    <input type="text" id="appId" required
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 bg-white text-gray-900 focus:ring-2 focus:ring-primary focus:border-transparent font-mono text-sm"
                        placeholder="1:123456789:web:abc123">
                </div>

                <div class="pt-4">
                    <button type="submit"
                        class="w-full bg-primary hover:bg-primary-dark text-white font-bold py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-2">
                        <span class="material-symbols-outlined">save</span>
                        설정 저장
                    </button>
                </div>
            </form>

            <!-- 현재 설정 상태 -->
            <div id="current-config" class="mt-6 p-4 bg-gray-50 rounded-lg hidden">
                <h3 class="text-sm font-semibold text-gray-700 mb-2">현재 저장된 설정:</h3>
                <pre id="config-display" class="text-xs font-mono text-gray-600 overflow-x-auto"></pre>
                <div class="mt-3 flex gap-2">
                    <a href="login.html" class="flex-1 text-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium">
                        로그인 페이지로 이동
                    </a>
                    <button onclick="clearConfig()" class="px-4 py-2 border border-gray-300 hover:bg-gray-100 text-gray-700 rounded-lg text-sm font-medium">
                        설정 초기화
                    </button>
                </div>
            </div>
        </div>

        <!-- 도움말 -->
        <div class="mt-6 text-center">
            <a href="FIREBASE_SETUP.md" target="_blank" class="text-sm text-gray-600 hover:text-gray-900 underline">
                자세한 설정 가이드 보기
            </a>
        </div>
    </div>

    <script>
        // 페이지 로드 시 현재 설정 확인
        window.addEventListener('DOMContentLoaded', () => {
            loadCurrentConfig();
        });

        // 현재 설정 불러오기
        function loadCurrentConfig() {
            const config = localStorage.getItem('firebaseConfig');
            if (config) {
                try {
                    const parsedConfig = JSON.parse(config);
                    document.getElementById('config-display').textContent = JSON.stringify(parsedConfig, null, 2);
                    document.getElementById('current-config').classList.remove('hidden');

                    // 폼에 현재 값 채우기
                    document.getElementById('apiKey').value = parsedConfig.apiKey || '';
                    document.getElementById('authDomain').value = parsedConfig.authDomain || '';
                    document.getElementById('projectId').value = parsedConfig.projectId || '';
                    document.getElementById('storageBucket').value = parsedConfig.storageBucket || '';
                    document.getElementById('messagingSenderId').value = parsedConfig.messagingSenderId || '';
                    document.getElementById('appId').value = parsedConfig.appId || '';
                } catch (e) {
                    console.error('설정 로드 실패:', e);
                }
            }
        }

        // 폼 제출 처리
        document.getElementById('firebase-setup-form').addEventListener('submit', (e) => {
            e.preventDefault();

            const config = {
                apiKey: document.getElementById('apiKey').value.trim(),
                authDomain: document.getElementById('authDomain').value.trim(),
                projectId: document.getElementById('projectId').value.trim(),
                storageBucket: document.getElementById('storageBucket').value.trim(),
                messagingSenderId: document.getElementById('messagingSenderId').value.trim(),
                appId: document.getElementById('appId').value.trim()
            };

            // LocalStorage에 저장
            localStorage.setItem('firebaseConfig', JSON.stringify(config));

            // 성공 메시지
            alert('✓ Firebase 설정이 저장되었습니다!\n\n이제 로그인 페이지로 이동하여 회원가입을 진행하세요.');

            // 현재 설정 표시
            loadCurrentConfig();
        });

        // 설정 초기화
        function clearConfig() {
            if (confirm('저장된 Firebase 설정을 삭제하시겠습니까?')) {
                localStorage.removeItem('firebaseConfig');
                document.getElementById('current-config').classList.add('hidden');
                document.getElementById('firebase-setup-form').reset();
                alert('설정이 초기화되었습니다.');
            }
        }
    </script>
</body>
</html>
